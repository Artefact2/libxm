ADD_CUSTOM_COMMAND(OUTPUT ${CMAKE_CURRENT_BINARY_DIR}/mus.libxm COMMAND libxmize --zero-all-waveforms ${CMAKE_CURRENT_SOURCE_DIR}/mus.xm > ${CMAKE_CURRENT_BINARY_DIR}/mus.libxm DEPENDS libxmize mus.xm)
ADD_EXECUTABLE(xmprocdemo xmprocdemo.c)
TARGET_COMPILE_OPTIONS(xmprocdemo PRIVATE --embed-dir=${CMAKE_CURRENT_BINARY_DIR})
TARGET_LINK_OPTIONS(xmprocdemo PRIVATE -z norelro)
set_source_files_properties(xmprocdemo.c PROPERTIES OBJECT_DEPENDS ${CMAKE_CURRENT_BINARY_DIR}/mus.libxm)
TARGET_LINK_LIBRARIES(xmprocdemo ${XM_LIBRARIES} xms)
